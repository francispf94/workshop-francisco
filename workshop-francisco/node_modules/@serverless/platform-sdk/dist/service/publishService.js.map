{"version":3,"sources":["../../src/service/publishService.js"],"names":["fetch","require","platformConfig","publishService","data","backendUrl","tenant","app","method","body","JSON","stringify","headers","Authorization","accessKey","response","ok","text","Error","serviceUrl","frontendUrl","service","name"],"mappings":";;;;;;;;AAAA,IAAMA,QAAQC,QAAQ,kBAAR,CAAd;AACA,IAAMC,iBAAiBD,QAAQ,WAAR,CAAvB;;AAEA,IAAME;AAAA,qEAAiB,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACEJ,MAAO,GAAEE,eAAeG,UAAW,WAAUD,KAAKE,MAAO,iBAAgBF,KAAKG,GAAI,WAAlF,EAA8F;AACnHC,sBAAQ,MAD2G;AAEnHC,oBAAMC,KAAKC,SAAL,CAAeP,IAAf,CAF6G;AAGnHQ,uBAAS;AACP,gCAAgB,kBADT;AAEPC,+BAAgB,UAAST,KAAKU,SAAU;AAFjC;AAH0G,aAA9F,CADF;;AAAA;AACfC,oBADe;;AAAA,gBAUhBA,SAASC,EAVO;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAWAD,SAASE,IAAT,EAXA;;AAAA;AAWbA,gBAXa;AAAA,kBAYb,IAAIC,KAAJ,CAAUD,IAAV,CAZa;;AAAA;AAcfE,sBAde,GAcD,GAAEjB,eAAekB,WAAY,WAAUhB,KAAKE,MAAO,iBAAgBF,KAAKG,GAAI,aAAYH,KAAKiB,OAAL,CAAaC,IAAK,EAdzG;AAAA,6CAedH,UAfc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAAA;AAAA;AAAA;AAAA,GAAN;;kBAkBehB,c","file":"publishService.js","sourcesContent":["const fetch = require('isomorphic-fetch')\nconst platformConfig = require('../config')\n\nconst publishService = async (data) => {\n  const response = await fetch(`${platformConfig.backendUrl}tenants/${data.tenant}/applications/${data.app}/services`, {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `bearer ${data.accessKey}`\n    }\n  })\n\n  if (!response.ok) {\n    const text = await response.text()\n    throw new Error(text)\n  }\n  const serviceUrl = `${platformConfig.frontendUrl}tenants/${data.tenant}/applications/${data.app}/services/${data.service.name}`\n  return serviceUrl\n}\n\nexport default publishService\n"]}